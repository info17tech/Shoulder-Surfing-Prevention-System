<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
<div class="login-align">
  <h2 class='main-heading'>Graphical Authentication System</h2>


  <button onclick="document.getElementById('id01').style.display='block'" style="width:auto;">Login</button>
  <button onclick="document.getElementById('id02').style.display='block'" style="width:auto;">Register</button>
</div>

  <div id="id01" class="modal">
    
    <form class="modal-content animate" action="/login" method="post">
      <div class="imgcontainer">
        <span onclick="document.getElementById('id01').style.display='none'" class="close" title="Close Modal">&times;</span>
      </div>

      <div class="container">
        <label for="uname"><b>Username</b></label>
        <input type="text" placeholder="Enter Username" name="uname" required>

        <label for="psw"><b>Primary Password</b></label>
        <input type="password" placeholder="Enter Password" name="psw" required>
          
        <button type="submit">Login</button>
      </div>

      <div class="container" style="background-color:#f1f1f1">
        <button type="button" onclick="document.getElementById('id01').style.display='none'" class="cancelbtn">Cancel</button>
      </div>
    </form>
  </div>

  <div id="id02" class="modal">
      <div class="modal-content animate">
          <div class="imgcontainer">
              <span onclick="document.getElementById('id02').style.display='none'" class="close" title="Close Modal">&times;</span>
              
          </div>
          <div class="container">
            <h1>Register</h1>
            <p>Please fill in this form to create an account.</p>
            <hr>
        
            <label for="email"><b>Email</b></label>
            <input type="text" placeholder="Enter Email" name="email" id="email" required>
        
            <label for="psw"><b>Password</b></label>
            <input type="password" placeholder="Enter Password" name="psw" id="psw" required>
        
            <label for="psw-repeat"><b>Second Password</b></label>
            <input type="password" placeholder="Repeat Password" name="psw-repeat" id="psw-repeat" pattern = "[A-za-z1-6]+" maxlength="6"  required >

            <div>
              <label><b>Choose a color</b></label>
              <ul class="nav nav-tabs nav-tabs-solid">
                <div class="radio-toolbar">
                  <input type="radio" id="radio9" name="radioFruit"  value="#FF0000">
                  <label for="radio9" style="background-color: red;"></label>

                  <input type="radio" id="radio10" name="radioFruit" value="#FFA500">
                  <label for="radio10" style="background-color: orange;"></label>

                  <input type="radio" id="radio11" name="radioFruit" value="#00FF00">
                  <label for="radio11" style="background-color: green;"></label>

                  <input type="radio" id="radio12" name="radioFruit" value="#800080">
                  <label for="radio12" style="background-color: purple;"></label>

                  <input type="radio" id="radio1" name="radioFruit" value="#0000FF">
                  <label for="radio1" style="background-color:  blue;"></label>

                  <input type="radio" id="radio2" name="radioFruit" value="#FFFF00">
                  <label for="radio2" style="background-color: yellow;"></label>
                </div>
              </ul>
          </div>


            <hr>
        
            <button onclick="deletefn()" class="registerbtn">Register</button>
          </div>
          
          <div class="container signin">
            <p>Already have an account? <a href="#">Sign in</a>.</p>
          </div>
        </div>
  </div>


  <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.1.10/vue.min.js"></script> 
  <script src="color.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/2.1.2/sweetalert.min.js"></script>
	<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js"
		integrity="sha512-bZS47S7sPOxkjU/4Bt0zrhEtWx0y0CRkhEp8IckzK+ltifIIE9EMIMTuT/mEzoIMewUINruDBIR/jJnbguonqQ=="
		crossorigin="anonymous"></script>

  <script>
    async function deletefn() {
      var uname=document.getElementById('email').value
      var ppass=document.getElementById('psw').value
      var spass=document.getElementById('psw-repeat').value
      var color = document.querySelector('input[name="radioFruit"]:checked').value;
      console.log(color)
			try {
				let res = await axios.post('/register', { uname,ppass,spass,color })
				console.log(res);
        swal({
					title: "Registration successful",
					icon: "success",
					button: "Ok",
				}).then(function () {
					location.replace("/log");
				});
      
			}
      catch(err){
        console.log("hello")
        swal({
					title: "Error!",
					icon: "error",
					button: "Ok",
				});
      }
    }
  </script>

  </body>
</html>
